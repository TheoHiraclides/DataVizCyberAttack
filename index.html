<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <style>
    body { margin:0;position:fixed;top:0;right:0;bottom:0;left:0; }
  </style>
</head>

<body>
  <script>
    // Feel free to change or delete any of the code you see in this editor!
    var svg = d3.select("body").append("svg")
      .attr("width", 960)
      .attr("height", 500)
    
      d3.csv( "https://raw.githubusercontent.com/TheoHiraclides/DataVizCyberAttack/master/vcdb_deonehot.csv", function(error, data) {
      console.log(data)
      
      let hacking = [];
      var scrape = "action.hacking.vector.";
      var found = false;
      
      for (var i = 0; i < 9000; i++) {
        found = false;
        for (var j = 0; j < hacking.length; j++) {
          if (data[i][scrape] == hacking[j]["name"]) {
            hacking[j]["value"] += 1;
            found = true;
          }
        }
        if (found == false) {
          hacking.push({"name": data[i][scrape], "value": 1});
        }
      }
      
      console.log(hacking);
      
      var scaleY = d3.scaleLinear().domain(d3.extent(hacking, function (d) {return d.value})).range([0,300])
      
      
      var bar = svg.selectAll("bar")
        .data(hacking)
        .enter();
      
      bar
      	.append("rect")
        .style("fill", "steelblue")
        .attr("x", function(d, i) { return i*70 + 30; })
        .attr("width", 60)
        .attr("y", function(d) { return 350 - scaleY(d.value); })
        .attr("height", function(d) { return scaleY(d.value); });
      
      bar
        .append("text")
      	.attr("x", function(d, i) { return i*70 - 10; })
        .attr("y", function(d, i) { return 370 + 20*(i%2); })
      	.attr("text-anchor", "middle")
      	.text(function(d) { return d.name });
    })

  </script>
</body>
